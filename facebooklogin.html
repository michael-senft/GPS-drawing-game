<!doctype html>
<html>
<head></head>
<body>
<div id="fb-root"></div>
<script src="https://connect.facebook.net/en_US/all.js#xfbml=1&status=0"></script>
<!--<script>

  window.fbAsyncInit = function() {
  FB.init({
    appId      : '580057552082260',
	//channelUrl : 'channel.html',
    status     : true, 
    cookie     : true, 
    xfbml      : true
  });
  console.log("Fully initialized");  
   
     (function(d)
  	{
		console.log("function(d) start");
   	var js, id = 'facebook-jssdk', ref = d.
	getElementsByTagName('script')[0];
	   	
	if (d.getElementById(id)) 
	{
		return;
	}	
   	js = d.createElement('script'); js.id = id; js.	
	async = true;
   	js.src = "https://connect.facebook.net/en_US/all.js#xfbml=1&status=0";
   	ref.parentNode.insertBefore(js, ref);
	console.log("function(d) end");
  	}(document));

function login()
	{
		FB.login(function(response)
		{
			if (response.authResponse)
			{
				//connected
				console.log("login function: connected");
				testAPI();
			}
			else
			{
				console.log("login function: cancelled");
				//cancelled
			}
		});
	}
		
function testAPI() 
  {
	  console.log('Welcome!  Fetching your information.... ');
      FB.api('/me', function(response) 
	  {
      console.log('Good to see you, ' + response.name + '.');
      });
  }
  
}
</script>-->
	<script>
	//FB SDK asynchroon laden 
	(function(d){
	alert();
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "https://connect.facebook.net/en_US/all.js#xfbml=1&status=0";
   ref.parentNode.insertBefore(js, ref);
  }(document));
  
	window.fbAsyncInit = function(){
	FB.init({
	appId      : '580057552082260',
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
		});
	FB.Event.subscribe('auth.authResponseChange', function(response) {
	alert('subscribe');
	if (response.status == 'connected'){
	alert('connected');
		testAPI();
			} else if (response.status === 'not_authorized') {
			alert('not authorized');
				FB.login();
			} else {
			alert('else');
				FB.login();
			}
		});
	};
	
	</script>

<p>
<!--<div class="fb-login-button" data-max-rows="1" data-size="medium" data-show-faces="false" data-auto-logout-link="false"></div>-->
<fb:login-button show-faces="false" width="200" max-rows="1"></fb:login-button>
</p>
 <!--onclick="fb_login()"-->

</body>
</html>